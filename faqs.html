<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>FAQs</title>

<style>
* { box-sizing:border-box; font-family:Inter,system-ui }
body { margin:0; background:#f7f9fc; color:#111 }

/* NAV */
.nav {
  display:flex; gap:12px; padding:16px;
  justify-content:center; background:white;
  box-shadow:0 4px 20px rgba(0,0,0,.05);
}
.nav-btn {
  padding:10px 18px; border-radius:12px;
  background:#f1f4ff; cursor:pointer;
}
.nav-btn:hover { background:#4f6cff; color:white }

a{
  text-decoration: none;
}

/* PAGE */
.container { padding:20px; max-width:1000px; margin:auto }
h1 { margin-bottom:12px }

/* FORM */
.form {
  background:white;
  padding:18px;
  border-radius:18px;
  box-shadow:0 12px 40px rgba(0,0,0,.06);
  display:grid;
  gap:12px;
}
.form input, .form textarea {
  padding:12px;
  border-radius:12px;
  border:1px solid #ddd;
  font-size:15px;
}
.form button {
  padding:12px;
  border:none;
  border-radius:14px;
  background:#4f6cff;
  color:white;
  cursor:pointer;
}
.form button:hover { opacity:.9 }

/* FAQ GRID */
.faq-grid {
  margin-top:24px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
  gap:16px;
}
.faq-card {
  background:white;
  padding:16px;
  border-radius:18px;
  box-shadow:0 12px 40px rgba(0,0,0,.06);
  position:relative;
  animation:fadeUp .4s ease;
}
.faq-card h3 { margin:0 0 8px; font-size:16px }
.faq-card p { margin:0; opacity:.8; font-size:14px }

.delete-btn {
  position:absolute;
  top:12px;
  right:12px;
  border:none;
  background:#ffe8e8;
  padding:6px 10px;
  border-radius:10px;
  cursor:pointer;
}

/* LOADER */
.loader {
  position:fixed;
  inset:0;
  background:rgba(247,249,252,.85);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
.loader.hidden { display:none }

.spinner {
  width:52px;
  height:52px;
  border-radius:50%;
  border:4px solid #e0e6ff;
  border-top-color:#4f6cff;
  animation:spin .8s linear infinite;
}

@keyframes spin { to{transform:rotate(360deg)} }
@keyframes fadeUp {
  from{opacity:0; transform:translateY(15px)}
  to{opacity:1; transform:none}
}
</style>
</head>

<body>

<nav class="nav">
  <div class="nav-btn"> <a href="/"> Home </a></div>
  <div class="nav-btn"> <a href="/"> Menu </a></div>
  <div class="nav-btn"> <a href="/orders.html">Orders </a> </div>
</nav>

<!-- LOADER -->
<div id="loader" class="loader hidden">
  <div class="spinner"></div>
</div>

<section class="container">
<h1>‚ùì Manage FAQs</h1>

<div class="form">
  <input id="question" placeholder="Enter question">
  <textarea id="answer" rows="3" placeholder="Enter answer"></textarea>
  <button onclick="addFAQ()">Add FAQ</button>
</div>

<div id="faqList" class="faq-grid"></div>
</section>

<script>
/* üîó YOUR WEB APP URL */
const BASE = "https://script.google.com/macros/s/AKfycbxXsFMY-NlgWEbe8fQM8JbE0bZBDXgj_Y_SKwJ4emhUaXA-VpRXmKNeGX4eqhXSAUQaTA/exec"

/* LOADER HELPERS */
const loader = document.getElementById("loader")
const showLoader = ()=>loader.classList.remove("hidden")
const hideLoader = ()=>loader.classList.add("hidden")

async function loadFAQs(){
  showLoader()
  const res = await fetch(BASE + "?type=faqs")
  const data = await res.json()

  const faqList = document.getElementById("faqList")
  faqList.innerHTML = ""

  data.forEach(f=>{
    faqList.innerHTML += `
      <div class="faq-card">
        <button class="delete-btn" onclick="deleteFAQ(${f.id})">Delete</button>
        <h3>${f.Question}</h3>
        <p>${f.Answer}</p>
      </div>
    `
  })
  hideLoader()
}

async function addFAQ(){
  const q = question.value.trim()
  const a = answer.value.trim()
  if(!q || !a) return alert("Fill both fields")

  showLoader()
  const fd = new FormData()
  fd.append("action","addFAQ")
  fd.append("question",q)
  fd.append("answer",a)

  await fetch(BASE,{ method:"POST", body:fd })
  question.value=""
  answer.value=""
  await loadFAQs()
  hideLoader()
}

async function deleteFAQ(id){
  if(!confirm("Delete this FAQ?")) return

  showLoader()
  const fd = new FormData()
  fd.append("action","deleteFAQ")
  fd.append("id",id)

  await fetch(BASE,{ method:"POST", body:fd })
  await loadFAQs()
  hideLoader()
}

/* INITIAL LOAD */
loadFAQs()
</script>

</body>
</html>
